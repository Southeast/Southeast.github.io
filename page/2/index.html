<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Life Career</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Life Career">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Life Career">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Life Career">
  
    <link rel="alternate" href="/atom.xml" title="Life Career" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Life Career</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Message-Push" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/24/Message-Push/" class="article-date">
  <time datetime="2016-09-24T09:04:56.000Z" itemprop="datePublished">2016-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/Message-Push/">Message Push</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li>概述</li>
<li>基本目标&amp;高级目标</li>
<li>实现方式</li>
<li>原理贯通</li>
</ul>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>互联网公司都少不了要向用户推送各类信息，比如用户激活、修改密码、各类验证码等功能性信息，营销活动、网站推广等各类运营推广信息，定期的信息推送、用户关怀等各类功能。</li>
<li>当前信息的推送方式一般包括以下几类：向邮箱用户发送邮件、向电信用户发送短信以及向智能终端（智能手机、平板电脑等）用户发送的推送通知。实现这些功能看似都比较简单，一般都是一个简单的接口就可以完成发送，例如发送email，可以通过java的邮件规范实现包，直接设置收发方信息、邮件内容（html、text）等来完成：javax.mail.Transport#send(javax.mail.Message)。但是，在企业级的业务场景中，除了完成接口的调用，还要考虑许多其它的因素。</li>
</ul>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>基本目标：完成信息推送</li>
<li>高级目标：保证信息到达率、提升展示效果</li>
</ul>
<h2 id="邮件"><a href="#邮件" class="headerlink" title="邮件"></a>邮件</h2><ul>
<li>指标：</li>
<li>邮件能否高效送达用户，注意是收件箱，不是垃圾箱，Gmail与QQ的问题尤其头疼<br>　　- 减少退信邮件和垃圾邮件<br>　　- 触达效果要可追踪分析<br>　　- 减少人力成本，按需可控发送成本</li>
<li>垃圾邮件防御机制：<font color="blue">使用dns系统来定位和监管邮件发送者，通过签名机制防止冒充盗用</font></li>
<li>通过在 DNS 中查找目标服务器的地址，发送方服务器可以正确地将邮件路由至收件人。DNS 使用两种记录：Mail Exchanger (MX) 记录和 A 记录。MX 记录将域名称与一个或多个邮件主机名称相对应。A 记录则将主机名与服务器的 IP 地址相对应。</li>
<li>SPF是指Sender Policy Framework，是为了防范垃圾邮件而提出来的一种DNS记录类型，SPF是一种TXT类型的记录。SPF记录的本质，就是向收件人宣告：本域名的邮件从清单上所列IP发出的都是合法邮件，并非冒充的垃圾邮件。</li>
<li><p>DKIM（DomainKeys Identified Mail）是一种电子邮件的验证技术，使用密码学的基础提供了签名与验证的功能。一般来说，发送方会在电子邮件的标头插入DKIM-Signature及电子签名信息。而接收方则通过DNS查询得到公开密钥后进行验证。</p>
</li>
<li><p>到达率保证</p>
</li>
<li>DNS设置</li>
<li>DKIM配置</li>
<li><p>发送情况监控统计</p>
</li>
<li><p>模板准确率</p>
</li>
<li>邮件模板的设计原则是，保证尽可能多的主流邮件客户端正确展示。因为很多邮件客户端（如Outlook和Gmail）都会过滤HTML设置，过滤之后会导致邮件面目全非。具体的设计原则可以参考阮一峰的这篇博客——<a href="http://www.ruanyifeng.com/blog/2013/06/html_email.html" target="_blank" rel="external">html email编写指南</a>。</li>
<li>DocType。由于java mail的标准基本近些年一直处于停滞状态，因此DocType兼容性最好的是XHTML 1.0 strict，使用这个docType意味着不能使用HTML5的语法</li>
<li>Layout。邮件布局必须使用表格，有几行内容就设计几个row来展示</li>
<li>图片。图片是唯一可以引用的外部资源，css文件、字体文件、视频等都无法引用。另外，不少客户端默认都不展示图片，要确保图片不能加载时，主内容也能正确展示。</li>
<li><p>行内样式。由于网页头可能会被客户端删除，因此使用行内样式能最大限度的保障邮件的展示率。</p>
</li>
<li><font color="red">邮件方案</font></li>
<li>互联网公司有很多专业提供邮箱发送解决方案的产品，如SAE、sendcloud、阿里云等。通过这些产品完成一些指定的配置，即可帮用户完成到达率保证的相关配置，快速实现高触达率的邮件服务，价格也比较低。如果企业内没有从事过SMTP服务搭建的人员，建议使用类似的服务来实现邮件发送。</li>
<li>成熟的产品一般也会提供邮件发送情况统计报表，方便监控邮件的发送成功率、退信率、垃圾邮件举报等情况</li>
<li><img src="https://striker.teambition.net/thumbnail/110jf10c37e5656de7f990d87feb33ebae5d/w/800/h/399"></li>
<li><a href="http://www.sendcloud.net/" target="_blank" rel="external">sendcloud</a>，接入方式直接参考各产品的文档，一般都是几个API实现</li>
<li><font color="red">账号：wxd@jindouyun.com，密码：Tjup…</font>，后续还要用企业账号申请，并配置正式的发信域名</li>
</ul>
<h2 id="短信"><a href="#短信" class="headerlink" title="短信"></a>短信</h2><ul>
<li>短信一般都是简单的文本格式+链接，不涉及多媒体数据。一般短信服务商都会要求建立模板并进行审核，以防发送违禁数据或短信轰炸。对类似行为的账号也会采取一定的处罚措施</li>
<li>垃圾短信的过滤策略跟电信运营商有关，一般用户触发的短信数量和内容都不会触发过滤机制。如果是大规模的推送（如营销推广等），需要注意内容和每日/每月发送数量（具体策略需向短信服务商或电信运营商了解）</li>
<li>内容上可以借鉴这篇<a href="http://www.iyunying.org/yxzs/23952.html" target="_blank" rel="external">文章1</a>，<a href="http://toutiao.com/i6208085599543968258/" target="_blank" rel="external">文章2</a>，（<font color="red">未验证</font>）</li>
<li><font color="red">短信方案</font></li>
<li><a href="云片网">http://www.yunpian.com/</a>，参考官方API完成接入，对国内短信、国际短信、语音信息、流量等都有支持</li>
<li>提供发送到达率、失败原因、时间等各类统计</li>
<li>价格大约在5分钱左右（短信）</li>
<li>账号：ops@jindouyun.com</li>
</ul>
<h2 id="app推送"><a href="#app推送" class="headerlink" title="app推送"></a>app推送</h2><h3 id="ios"><a href="#ios" class="headerlink" title="ios"></a>ios</h3><h3 id="android"><a href="#android" class="headerlink" title="android"></a>android</h3><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2013/06/html_email.html" target="_blank" rel="external">html email编写指南</a></li>
<li><a href="http://it.sohu.com/20121212/n360239343.shtml" target="_blank" rel="external">搜狐SendCloud 适用于开发者的邮件发送平台</a></li>
<li><a href="http://blog.csdn.net/mal327/article/details/6700493" target="_blank" rel="external">邮件服务器DNS设置—–MX、SPF、DKIM记录详解</a></li>
<li><a href="https://zh.wikipedia.org/wiki/DKIM" target="_blank" rel="external">DKIM-WIKI</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">SMTP-WIKI</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/09/24/Message-Push/" data-id="cjps0hy870000s6qhdm71a0gj" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/用户触达/">用户触达</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/24/hello-world/" class="article-date">
  <time datetime="2016-09-24T06:48:58.000Z" itemprop="datePublished">2016-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/09/24/hello-world/" data-id="cjps0hy8y0005s6qhehdsac8y" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell-linux-ops/">shell,linux,ops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/用户触达/">用户触达</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/运维-DevOps/">运维,DevOps</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/shell-linux-ops/" style="font-size: 10px;">shell,linux,ops</a> <a href="/tags/用户触达/" style="font-size: 10px;">用户触达</a> <a href="/tags/运维-DevOps/" style="font-size: 10px;">运维,DevOps</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/17/git命令行常用总结/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/11/27/Time-Series-Data-Introduction/">Time-Series Data Introduction</a>
          </li>
        
          <li>
            <a href="/2018/04/20/持续交付/">旅行行业基础数据本地管理</a>
          </li>
        
          <li>
            <a href="/2018/04/01/java团队code style规范/">java团队code style规范</a>
          </li>
        
          <li>
            <a href="/2018/03/26/旅行行业基础数据本地管理/">旅行行业基础数据本地管理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 SeventyNine<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>