<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Life Career</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Life Career">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Life Career">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Life Career">
  
    <link rel="alternate" href="/atom.xml" title="Life Career" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Life Career</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-servermonitoring" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/15/servermonitoring/" class="article-date">
  <time datetime="2017-07-15T04:52:58.000Z" itemprop="datePublished">2017-07-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="系统监控"><a href="#系统监控" class="headerlink" title="系统监控"></a>系统监控</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>目标</li>
<li>原理</li>
<li>方案选择<ul>
<li>商业方案：本地oneAPM(本地化服务)，国际NETWAYS（便宜，价钱一半）</li>
</ul>
</li>
</ul>
<h2 id="icinga介绍"><a href="#icinga介绍" class="headerlink" title="icinga介绍"></a>icinga介绍</h2><ul>
<li>简介</li>
<li>核心概念</li>
<li>模型</li>
</ul>
<h2 id="icinga实践"><a href="#icinga实践" class="headerlink" title="icinga实践"></a>icinga实践</h2><h3 id="服务监控搭建"><a href="#服务监控搭建" class="headerlink" title="服务监控搭建"></a>服务监控搭建</h3><h3 id="监控集群设计方案"><a href="#监控集群设计方案" class="headerlink" title="监控集群设计方案"></a>监控集群设计方案</h3><ul>
<li>监控报警</li>
<li>报表接入</li>
<li>配置方案选择：底层文件配置 or 可视化配置 Icinga Director</li>
<li>主机监控<ul>
<li>ping</li>
<li>ssh -p</li>
</ul>
</li>
<li>redis监控</li>
<li>ssdb监控</li>
<li>mysql监控</li>
</ul>
<h3 id="master机器迁移"><a href="#master机器迁移" class="headerlink" title="master机器迁移"></a>master机器迁移</h3><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="1000个基于perl脚本命令的service导致high-load问题"><a href="#1000个基于perl脚本命令的service导致high-load问题" class="headerlink" title="1000个基于perl脚本命令的service导致high load问题"></a>1000个基于perl脚本命令的service导致high load问题</h3><p>### </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/15/servermonitoring/" data-id="cjps0hy9h0009s6qht3f8wxf2" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-操作系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/27/操作系统/" class="article-date">
  <time datetime="2017-04-27T06:08:59.000Z" itemprop="datePublished">2017-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><ul>
<li>CPU核心概念<ul>
<li>中断</li>
<li>寄存器</li>
<li>CPU MODE：内核态、用户态</li>
</ul>
</li>
<li>实时操作系统<ul>
<li>CPU时间片算法：</li>
<li>抢占/非抢占</li>
<li>Timer</li>
</ul>
</li>
<li>OS核心功能组件<ul>
<li>内存管理</li>
<li>I/O管理</li>
<li>GPU</li>
<li>网络</li>
<li>多媒体</li>
</ul>
</li>
</ul>
<h3 id="RTOS-design"><a href="#RTOS-design" class="headerlink" title="RTOS design"></a>RTOS design</h3><ul>
<li><font color="blue">根据已有的CPU文档（ARM Quad A7 core）、主板文档（BCM2835 ARM peripherals），对底层硬件进行操作，包括寄存器、内存、GPU等</font></li>
<li>封装底层硬件、为上层应用提供API，可以查阅<font color="red">Linux Kernel</font>的lib，你们要求application跨平台，可以查阅<font color="red">Java JVM的跨平台设计</font></li>
<li>realtime的关键应该是抢占式调度，需要基于中断实现</li>
<li>四核CPU，要实现多核并发，主要是协调四个CPU同时工作。比如给4个CPU各分配一个任务，任务完成后怎么通知其它CPU，并协调下一步指令执行。应该是<font color="red">基于cpu的mailbox去实现</font>，关注一下QA7文档的mailbox部分。另外就是查一下线程/进程的状态转换模型和调度模型</li>
<li>内存寻址要搞清楚虚拟地址和物理地址之间的转换，再看一下文档的Memory Manage Unit(MMU)和Direct Memory Access（DMA）</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/27/操作系统/" data-id="cjps0hy9p000es6qh1668zcne" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-分布式服务监控 - 概述" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/23/分布式服务监控 - 概述/" class="article-date">
  <time datetime="2017-03-23T06:58:10.000Z" itemprop="datePublished">2017-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="分布式服务监控-概述"><a href="#分布式服务监控-概述" class="headerlink" title="分布式服务监控 - 概述"></a>分布式服务监控 - 概述</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li>目标</li>
<li>概述</li>
</ul>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>收集并存储一定时期内的服务器系统状态、网络状态、核心组件的核心指标，常见服务（mysql、redis等）的服务指标</li>
<li>7*24小时对上述指标进行<font color="blue">监控报警</font>，对超过指定阈值的可疑指标发出报警（邮件或短信通知）。区别于dapper和pinpoint的分布式全局调用追踪</li>
<li>对上述指标数据提供<font color="blue">数据报表</font>功能，便于全面的跟踪查看系统的运行状态</li>
</ul>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li><i>Application Performance Management(应用性能管理，简称APM)</i>：In the fields of information technology and systems management, application performance management is the <font color="blue">monitoring and management of performance and availability of software applications</font>. APM strives to detect and diagnose complex application performance problems to maintain an expected level of service.</li>
<li><font color="blue">商用软件</font>，目前市面上有不少商用的APM管理软件，如<a href="http://www.toushibao.com/" target="_blank" rel="external">oneAPM</a>、<a href="">透视宝</a>等。在监控的目标机器上安装agent，通过agent采集数据推送到服务商的server端，server端提供数据报表展示和监控报警功能。使用这些服务，可以快速的搭建起自己的主机和服务监控，只需要安装相应的agent，并配置相关服务的配置文件如redis、mysql等，主机本身disk、memory、cpu、traffic等指标通常默认支持，不需额外配置；缺点是价格不低，一般要几十块钱每主机每月。</li>
<li><font color="blue">开源软件</font>，我们的集群规模大约在100台左右，一年的价格算下来就在4万块左右，从节约成本的角度我们选择了开源的技术方案。另外作为一个合格的技术人员，一定要有创造一切的雄心！比较常用的开源监控软件有Nagios、Icinga、Zabbix，比较如下，还有更多其它方案可以参考这篇<a href="https://www.serverdensity.com/monitor/linux/how-to/" target="_blank" rel="external">文章</a>，以及serverfalut这篇<a href="http://serverfault.com/questions/44/what-tool-do-you-use-to-monitor-your-servers" target="_blank" rel="external">帖子</a><ul>
<li><a href="http://www.zabbix.com/" target="_blank" rel="external">Zabbix</a>：自带报表更能，安装简单</li>
<li><a href="https://www.nagios.org/" target="_blank" rel="external">Nagios</a>: 使用最广泛，支持所有平台、扩展性好，<font color="red">部署相对复杂</font>、图表需要插件扩展支持</li>
<li><a href="">Icinga2</a>: nagios的fork，是为了解决nagios的更新慢、反馈慢等问题而设立的项目。覆盖Nagios所有功能，更新快、社区活跃</li>
</ul>
</li>
<li>我们最终选用的方案是icinga，考虑的因素包括：nagios的使用广泛、icinga社区的活跃度非常高、以及icinga的分布式支持</li>
<li>icingaweb2监控示意图，<font color="red">通过这些页面可以全面的掌握集群机器和服务的动态</font><ul>
<li>首页：首页显示菜单及当前服务器和服务存在的主要问题（Service Problems)，所有的问题都会以红色警报提示 <img src="https://code.aliyun.com/jindouyuncode/jdy-solution-master/uploads/2fde37d8db8c7cd5bab1009a0e2cfb87/image.png" alt="image"></li>
<li>hosts: hosts菜单显示所有服务器状态<img src="https://code.aliyun.com/jindouyuncode/jdy-solution-master/uploads/e6b93b170310e44fab86a6ea88fee96d/image.png" alt="image"></li>
<li>hostgroups：hostgroups按分组管理所有的服务器 <img src="https://code.aliyun.com/jindouyuncode/jdy-solution-master/uploads/70c0f97ecb898bea9bbd0a3d82709ee2/image.png" alt="image"></li>
<li>servicegroups：按分组管理所有的服务<img src="https://code.aliyun.com/jindouyuncode/jdy-solution-master/uploads/cdbd4f1daf0ac4680b8b241b3022f2eb/image.png" alt="image"></li>
</ul>
</li>
</ul>
<h2 id="领域模型"><a href="#领域模型" class="headerlink" title="领域模型"></a>领域模型</h2><h3 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h3><ul>
<li>Master</li>
<li>Satelite</li>
<li>Client</li>
</ul>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><ul>
<li>features<ul>
<li>通过icinga command line interface命令控制feature，管理通知（notification）、命令（command）、ido-mysql等</li>
<li><img src="https://code.aliyun.com/jindouyuncode/jdy-solution-master/uploads/65a5420a9c21575e17679f1071163cc0/image.png" alt="image"></li>
</ul>
</li>
<li>Template</li>
<li>Command（icinga监控命令） <ul>
<li>Check Commands</li>
<li>示例：<pre><code><br>object CheckCommand “check_redis” {<br> command = [ PluginDir + “/check_redis.pl”]<br> arguments = {<br>   “-H” = “$redis_host$”<br>   “-p” = “$redis_port$”<br>   “-x” = “$redis_pwd$”<br>   “-a” = “mem_fragmentation_ratio,connected_clients,keyspace_hits,used_memory_rss,total_connections_received,blocked_clients”<br>   “-w” = “~,100,~,300M,~,~”<br>   “-c” = “1.0:20,300,~,500M,~,~”<br> }<br>}<br></code></pre></li>
<li>Notification Commands</li>
<li>Event Commands</li>
</ul>
</li>
<li>Service配置<pre><code><br>  apply Service “check-cache-redis” {<pre><code>import &quot;generic-service&quot;
check_command = &quot;check_redis&quot;
vars.redis_host = host.address
vars.redis_port = &quot;7136&quot;
vars.redis_pwd = &quot;j^dy@&quot;
assign where host.name == &quot;icinga-cache1.jindouyun.com&quot;
</code></pre>  }<br>  </code></pre></li>
<li>groups配置，使用apply rules表达式（Apply Rules Expression)批量指定group<pre><code><br>  //服务器分组<br>  object HostGroup “cache-servers” {<pre><code>display_name = &quot;Cache Servers&quot;
assign where match(&quot;*cache*&quot;, host.name)
</code></pre>  }<br>  //服务分组<br>  object ServiceGroup “redis” {<pre><code>display_name = &quot;Redis Checks&quot;
assign where match(&quot;check_redis&quot;, service.check_command)
</code></pre>  }<br>  </code></pre></li>
</ul>
<h2 id="icinga实践"><a href="#icinga实践" class="headerlink" title="icinga实践"></a>icinga实践</h2><h3 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h3><ul>
<li>分布式</li>
<li>插件扩展</li>
<li>安全性</li>
</ul>
<h3 id="master安装"><a href="#master安装" class="headerlink" title="master安装"></a>master安装</h3><ul>
<li>安装icinga2<ul>
<li>yum install -y <a href="https://packages.icinga.com/epel/7/release/noarch/icinga-rpm-release-7-1.el7.centos.noarch.rpm" target="_blank" rel="external">https://packages.icinga.com/epel/7/release/noarch/icinga-rpm-release-7-1.el7.centos.noarch.rpm</a></li>
<li>yum install -y icinga2</li>
<li>chkconfig icinga2 on</li>
<li>service icinga2 start</li>
</ul>
</li>
<li>安装httpd<ul>
<li>yum install -y httpd</li>
<li>chkconfig httpd on</li>
<li>service httpd start</li>
</ul>
</li>
<li>安装nagios插件<ul>
<li>yum install -y nagios-plugins-all</li>
</ul>
</li>
<li>安装、初始化mysql库<ul>
<li>DB IDO（DataBase Icinga Data Output）</li>
<li>安装mysql：yum install -y mysql-server mysql &amp;&amp; chkconfig mysqld on &amp;&amp; service mysqld start &amp;&amp; mysql_secure_installation</li>
<li>yum install -y icinga2-ido-mysql &amp;&amp; icinga2 feature enable ido-mysql</li>
<li>配置文件位于/etc/icinga2/features-available，修改默认密码</li>
</ul>
</li>
<li>安装icinga web2<ul>
<li>cinga2 feature enable command</li>
<li>systemctl restart icinga2.service</li>
<li>sudo usermod -a -G icingacmd apache</li>
<li>id apache</li>
<li>sudo yum install icingaweb2 icingacli -y</li>
<li>sudo icingacli setup config webserver apache –document-root /usr/share/icingaweb2/public</li>
<li>sudo systemctl restart httpd.service</li>
<li>sudo icingacli setup token create</li>
</ul>
</li>
<li>安装高亮插件 install vim highlighting plugin<ul>
<li>yum install vim-icinga2</li>
<li>touch ~/.vimrc</li>
<li>echo “syntax on” &gt;&gt; ~/.vimrc</li>
</ul>
</li>
<li>节点设置，使用<a href="https://docs.icinga.com/icinga2/latest/doc/module/icinga2/chapter/distributed-monitoring?highlight-search=Host%20certificate%20common%20name#distributed-monitoring-security" target="_blank" rel="external">icinga2 node wizard</a><ul>
<li>注意master节点的zone.conf文件，需要修改master zone名称为“master”，不能使用默认的NodeName</li>
<li>注意生成ssl key用于master/client加密通讯</li>
</ul>
</li>
</ul>
<h3 id="client安装"><a href="#client安装" class="headerlink" title="client安装"></a>client安装</h3><ul>
<li>节点设置，使用<a href="https://docs.icinga.com/icinga2/latest/doc/module/icinga2/chapter/distributed-monitoring?highlight-search=Host%20certificate%20common%20name#distributed-monitoring-security" target="_blank" rel="external">icinga2 node wizard</a><ul>
<li>连接的建立方式，一般从master/satelite机器向client机器建立连接，client机器不需要建立向master/satelite机器的连接（不需要知道master/satelite机器连接）</li>
</ul>
</li>
</ul>
<h3 id="服务器上线监控"><a href="#服务器上线监控" class="headerlink" title="服务器上线监控"></a>服务器上线监控</h3><ul>
<li>定时通过网络查看服务器是否在线</li>
<li><img src="https://code.aliyun.com/jindouyuncode/jdy-solution-master/uploads/15119d43ec776b90babfd6ad7532f8c0/image.png" alt="image"></li>
<li>hostalive 默认的服务器监控命令<pre><code><br>object Host “icinga-cache1.jindouyun.com” {<br>check_command = “hostalive”<br>address = “10.28.204.99”<br>vars.client_endpoint = name //follows the convention that host name == endpoint name<br>vars.type = “cache”<br>}<br></code></pre></li>
<li>ssh 通过指定端口连接服务器，确定服务器是否在线<pre><code><br>object Host “icinga-train-pricenode04.jindouyun.com” {<br>check_command = “ssh”<br>vars.client_endpoint = name<br>vars.ssh_address = “221.1.1.1”<br>vars.ssh_port = “12345”<br>vars.type = “node”<br>}<br></code></pre></li>
</ul>
<h3 id="redis监控"><a href="#redis监控" class="headerlink" title="redis监控"></a>redis监控</h3><h3 id="ssdb监控"><a href="#ssdb监控" class="headerlink" title="ssdb监控"></a>ssdb监控</h3><h3 id="外部插件"><a href="#外部插件" class="headerlink" title="外部插件"></a>外部插件</h3><ul>
<li>icinga大量使用perl脚本作为外部插件的实现方式，安装perl<ul>
<li>安装CPAN：yum install perl-CPAN</li>
<li>cpan:&gt; force install Redis</li>
<li>下载插件脚本并赋予执行权限</li>
</ul>
</li>
<li>常用外部插件<ul>
<li>报表：graphite</li>
<li>nagios-plugin自带的check_redis.pl等插件</li>
<li>自己实现短信插件（TODO）</li>
</ul>
</li>
</ul>
<h1 id="高级主题"><a href="#高级主题" class="headerlink" title="高级主题"></a>高级主题</h1><h2 id="load过高问题"><a href="#load过高问题" class="headerlink" title="load过高问题"></a>load过高问题</h2><h2 id="集群搭设"><a href="#集群搭设" class="headerlink" title="集群搭设"></a>集群搭设</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/23/分布式服务监控 - 概述/" data-id="cjps0hy9m000cs6qharzph80x" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Continuous-Integration-Based-On-Aliyun-Crp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/24/Continuous-Integration-Based-On-Aliyun-Crp/" class="article-date">
  <time datetime="2016-09-24T09:59:47.000Z" itemprop="datePublished">2016-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/Continuous-Integration-Based-On-Aliyun-Crp/">Continuous Integration Based On Aliyun Crp</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>## </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/09/24/Continuous-Integration-Based-On-Aliyun-Crp/" data-id="cjps0hy8e0001s6qhgplu60a5" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/运维-DevOps/">运维,DevOps</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Message-Push" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/24/Message-Push/" class="article-date">
  <time datetime="2016-09-24T09:04:56.000Z" itemprop="datePublished">2016-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/Message-Push/">Message Push</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li>概述</li>
<li>基本目标&amp;高级目标</li>
<li>实现方式</li>
<li>原理贯通</li>
</ul>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>互联网公司都少不了要向用户推送各类信息，比如用户激活、修改密码、各类验证码等功能性信息，营销活动、网站推广等各类运营推广信息，定期的信息推送、用户关怀等各类功能。</li>
<li>当前信息的推送方式一般包括以下几类：向邮箱用户发送邮件、向电信用户发送短信以及向智能终端（智能手机、平板电脑等）用户发送的推送通知。实现这些功能看似都比较简单，一般都是一个简单的接口就可以完成发送，例如发送email，可以通过java的邮件规范实现包，直接设置收发方信息、邮件内容（html、text）等来完成：javax.mail.Transport#send(javax.mail.Message)。但是，在企业级的业务场景中，除了完成接口的调用，还要考虑许多其它的因素。</li>
</ul>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>基本目标：完成信息推送</li>
<li>高级目标：保证信息到达率、提升展示效果</li>
</ul>
<h2 id="邮件"><a href="#邮件" class="headerlink" title="邮件"></a>邮件</h2><ul>
<li>指标：</li>
<li>邮件能否高效送达用户，注意是收件箱，不是垃圾箱，Gmail与QQ的问题尤其头疼<br>　　- 减少退信邮件和垃圾邮件<br>　　- 触达效果要可追踪分析<br>　　- 减少人力成本，按需可控发送成本</li>
<li>垃圾邮件防御机制：<font color="blue">使用dns系统来定位和监管邮件发送者，通过签名机制防止冒充盗用</font></li>
<li>通过在 DNS 中查找目标服务器的地址，发送方服务器可以正确地将邮件路由至收件人。DNS 使用两种记录：Mail Exchanger (MX) 记录和 A 记录。MX 记录将域名称与一个或多个邮件主机名称相对应。A 记录则将主机名与服务器的 IP 地址相对应。</li>
<li>SPF是指Sender Policy Framework，是为了防范垃圾邮件而提出来的一种DNS记录类型，SPF是一种TXT类型的记录。SPF记录的本质，就是向收件人宣告：本域名的邮件从清单上所列IP发出的都是合法邮件，并非冒充的垃圾邮件。</li>
<li><p>DKIM（DomainKeys Identified Mail）是一种电子邮件的验证技术，使用密码学的基础提供了签名与验证的功能。一般来说，发送方会在电子邮件的标头插入DKIM-Signature及电子签名信息。而接收方则通过DNS查询得到公开密钥后进行验证。</p>
</li>
<li><p>到达率保证</p>
</li>
<li>DNS设置</li>
<li>DKIM配置</li>
<li><p>发送情况监控统计</p>
</li>
<li><p>模板准确率</p>
</li>
<li>邮件模板的设计原则是，保证尽可能多的主流邮件客户端正确展示。因为很多邮件客户端（如Outlook和Gmail）都会过滤HTML设置，过滤之后会导致邮件面目全非。具体的设计原则可以参考阮一峰的这篇博客——<a href="http://www.ruanyifeng.com/blog/2013/06/html_email.html" target="_blank" rel="external">html email编写指南</a>。</li>
<li>DocType。由于java mail的标准基本近些年一直处于停滞状态，因此DocType兼容性最好的是XHTML 1.0 strict，使用这个docType意味着不能使用HTML5的语法</li>
<li>Layout。邮件布局必须使用表格，有几行内容就设计几个row来展示</li>
<li>图片。图片是唯一可以引用的外部资源，css文件、字体文件、视频等都无法引用。另外，不少客户端默认都不展示图片，要确保图片不能加载时，主内容也能正确展示。</li>
<li><p>行内样式。由于网页头可能会被客户端删除，因此使用行内样式能最大限度的保障邮件的展示率。</p>
</li>
<li><font color="red">邮件方案</font></li>
<li>互联网公司有很多专业提供邮箱发送解决方案的产品，如SAE、sendcloud、阿里云等。通过这些产品完成一些指定的配置，即可帮用户完成到达率保证的相关配置，快速实现高触达率的邮件服务，价格也比较低。如果企业内没有从事过SMTP服务搭建的人员，建议使用类似的服务来实现邮件发送。</li>
<li>成熟的产品一般也会提供邮件发送情况统计报表，方便监控邮件的发送成功率、退信率、垃圾邮件举报等情况</li>
<li><img src="https://striker.teambition.net/thumbnail/110jf10c37e5656de7f990d87feb33ebae5d/w/800/h/399"></li>
<li><a href="http://www.sendcloud.net/" target="_blank" rel="external">sendcloud</a>，接入方式直接参考各产品的文档，一般都是几个API实现</li>
<li><font color="red">账号：wxd@jindouyun.com，密码：Tjup…</font>，后续还要用企业账号申请，并配置正式的发信域名</li>
</ul>
<h2 id="短信"><a href="#短信" class="headerlink" title="短信"></a>短信</h2><ul>
<li>短信一般都是简单的文本格式+链接，不涉及多媒体数据。一般短信服务商都会要求建立模板并进行审核，以防发送违禁数据或短信轰炸。对类似行为的账号也会采取一定的处罚措施</li>
<li>垃圾短信的过滤策略跟电信运营商有关，一般用户触发的短信数量和内容都不会触发过滤机制。如果是大规模的推送（如营销推广等），需要注意内容和每日/每月发送数量（具体策略需向短信服务商或电信运营商了解）</li>
<li>内容上可以借鉴这篇<a href="http://www.iyunying.org/yxzs/23952.html" target="_blank" rel="external">文章1</a>，<a href="http://toutiao.com/i6208085599543968258/" target="_blank" rel="external">文章2</a>，（<font color="red">未验证</font>）</li>
<li><font color="red">短信方案</font></li>
<li><a href="云片网">http://www.yunpian.com/</a>，参考官方API完成接入，对国内短信、国际短信、语音信息、流量等都有支持</li>
<li>提供发送到达率、失败原因、时间等各类统计</li>
<li>价格大约在5分钱左右（短信）</li>
<li>账号：ops@jindouyun.com</li>
</ul>
<h2 id="app推送"><a href="#app推送" class="headerlink" title="app推送"></a>app推送</h2><h3 id="ios"><a href="#ios" class="headerlink" title="ios"></a>ios</h3><h3 id="android"><a href="#android" class="headerlink" title="android"></a>android</h3><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2013/06/html_email.html" target="_blank" rel="external">html email编写指南</a></li>
<li><a href="http://it.sohu.com/20121212/n360239343.shtml" target="_blank" rel="external">搜狐SendCloud 适用于开发者的邮件发送平台</a></li>
<li><a href="http://blog.csdn.net/mal327/article/details/6700493" target="_blank" rel="external">邮件服务器DNS设置—–MX、SPF、DKIM记录详解</a></li>
<li><a href="https://zh.wikipedia.org/wiki/DKIM" target="_blank" rel="external">DKIM-WIKI</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE" target="_blank" rel="external">SMTP-WIKI</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/09/24/Message-Push/" data-id="cjps0hy870000s6qhdm71a0gj" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/用户触达/">用户触达</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/24/hello-world/" class="article-date">
  <time datetime="2016-09-24T06:48:58.000Z" itemprop="datePublished">2016-09-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/09/24/hello-world/" data-id="cjps0hy8y0005s6qhehdsac8y" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DevOps/">DevOps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PAXOS/">PAXOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Polyglot/">Polyglot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SOA/">SOA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bigdata/">bigdata</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/classloader/">classloader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell-linux-ops/">shell,linux,ops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并发/">并发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术内幕/">技术内幕</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/用户触达/">用户触达</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/运维-DevOps/">运维,DevOps</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/DevOps/" style="font-size: 10px;">DevOps</a> <a href="/tags/PAXOS/" style="font-size: 10px;">PAXOS</a> <a href="/tags/Polyglot/" style="font-size: 10px;">Polyglot</a> <a href="/tags/SOA/" style="font-size: 10px;">SOA</a> <a href="/tags/bigdata/" style="font-size: 10px;">bigdata</a> <a href="/tags/classloader/" style="font-size: 10px;">classloader</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/jvm/" style="font-size: 10px;">jvm</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/shell-linux-ops/" style="font-size: 10px;">shell,linux,ops</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/分布式/" style="font-size: 10px;">分布式</a> <a href="/tags/并发/" style="font-size: 10px;">并发</a> <a href="/tags/技术内幕/" style="font-size: 15px;">技术内幕</a> <a href="/tags/用户触达/" style="font-size: 10px;">用户触达</a> <a href="/tags/笔记/" style="font-size: 20px;">笔记</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/运维-DevOps/" style="font-size: 10px;">运维,DevOps</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/03/06/常用地址/">go语言入门</a>
          </li>
        
          <li>
            <a href="/2019/03/06/翻译：成为多语种的程序员（Being a Polyglot Programmer）/">翻译：成为多语种的程序员（Being a Polyglot Programmer）</a>
          </li>
        
          <li>
            <a href="/2019/02/10/java classloader/">java classloader详解</a>
          </li>
        
          <li>
            <a href="/2019/02/06/redis实践/">redis实践</a>
          </li>
        
          <li>
            <a href="/2019/01/27/SOA方法论/">SOA架构总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 SeventyNine<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>